여러 쓰레드를 사용할때 쓰레드가 번갈아가면서 실행이 되는데 그렇게 되면 내가 원하는대로 작동이 안된다.

원하는대로 작동이 안되는 이유가 sum++, sum--로 예를 들어서 설명을 하면 sum++은 어셈블리어로 세단계로 나누어지는데
int32 eax = sum;
eax = eax + 1;
sum = eax; 로 나누어진다.
근데 멀티 쓰레드니까 int32 eax = sum; 이 작동을 하고 또 다른 쓰레드에서 이 동작이 되면 섞이게 되는것이다.

동기화라는 작업을 통해 순서를 조정할 수 있다.
atomic을 이용해서 쓰레드가 완료가 될때까지 다른 쓰레드가 대기를 하게된다. atomic은 템플릿을 사용해서 atomic<int> sum = 0; 이런식으로 사용할 수 있다. 

atomic을 사용하면 연산이 매우 느려져서 꼭 필요한 상황에서만 사용해야 한다. 